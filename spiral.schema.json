{
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"$id": "https://raw.githubusercontent.com/Mearman/SPIRAL/refs/heads/main/spiral.schema.json",
	"title": "SPIRAL Document",
	"anyOf": [
		{
			"additionalProperties": false,
			"description": "AIRDocument",
			"properties": {
				"airDefs": {
					"items": {
						"additionalProperties": false,
						"properties": {
							"body": {
								"anyOf": [
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "lit",
												"type": "string"
											},
											"type": {
												"$ref": "#/$defs/Type"
											},
											"value": {}
										},
										"required": [
											"kind",
											"type",
											"value"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "ref",
												"type": "string"
											},
											"id": {
												"type": "string"
											}
										},
										"required": [
											"kind",
											"id"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "var",
												"type": "string"
											},
											"name": {
												"type": "string"
											}
										},
										"required": [
											"kind",
											"name"
										],
										"type": "object"
									},
									{
										"$ref": "#/$defs/CallExpr"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "if",
												"type": "string"
											},
											"type": {
												"$ref": "#/$defs/Type"
											},
											"cond": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											},
											"then": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											},
											"else": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											}
										},
										"required": [
											"kind",
											"cond",
											"then",
											"else"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "let",
												"type": "string"
											},
											"type": {
												"$ref": "#/$defs/Type"
											},
											"name": {
												"type": "string"
											},
											"value": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											},
											"body": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											}
										},
										"required": [
											"kind",
											"name",
											"value",
											"body"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "airRef",
												"type": "string"
											},
											"ns": {
												"type": "string"
											},
											"name": {
												"type": "string"
											},
											"args": {
												"items": {
													"type": "string"
												},
												"type": "array"
											}
										},
										"required": [
											"kind",
											"ns",
											"name",
											"args"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "predicate",
												"type": "string"
											},
											"name": {
												"type": "string"
											},
											"value": {
												"type": "string"
											}
										},
										"required": [
											"kind",
											"name",
											"value"
										],
										"type": "object"
									}
								]
							},
							"name": {
								"type": "string"
							},
							"ns": {
								"type": "string"
							},
							"params": {
								"items": {
									"type": "string"
								},
								"type": "array"
							},
							"result": {
								"$ref": "#/$defs/Type"
							}
						},
						"required": [
							"ns",
							"name",
							"params",
							"result",
							"body"
						],
						"type": "object"
					},
					"type": "array"
				},
				"capabilities": {
					"items": {
						"type": "string"
					},
					"type": "array"
				},
				"functionSigs": {
					"items": {
						"additionalProperties": false,
						"properties": {
							"name": {
								"type": "string"
							},
							"ns": {
								"type": "string"
							},
							"params": {
								"items": {
									"$ref": "#/$defs/Type"
								},
								"type": "array"
							},
							"pure": {
								"type": "boolean"
							},
							"returns": {
								"$ref": "#/$defs/Type"
							}
						},
						"required": [
							"ns",
							"name",
							"params",
							"returns",
							"pure"
						],
						"type": "object"
					},
					"type": "array"
				},
				"nodes": {
					"items": {
						"anyOf": [
							{
								"additionalProperties": false,
								"properties": {
									"expr": {
										"anyOf": [
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "lit",
														"type": "string"
													},
													"type": {
														"$ref": "#/$defs/Type"
													},
													"value": {}
												},
												"required": [
													"kind",
													"type",
													"value"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "ref",
														"type": "string"
													},
													"id": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"id"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "var",
														"type": "string"
													},
													"name": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"name"
												],
												"type": "object"
											},
											{
												"$ref": "#/$defs/CallExpr"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "if",
														"type": "string"
													},
													"type": {
														"$ref": "#/$defs/Type"
													},
													"cond": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													},
													"then": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													},
													"else": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													}
												},
												"required": [
													"kind",
													"cond",
													"then",
													"else"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "let",
														"type": "string"
													},
													"type": {
														"$ref": "#/$defs/Type"
													},
													"name": {
														"type": "string"
													},
													"value": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													},
													"body": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													}
												},
												"required": [
													"kind",
													"name",
													"value",
													"body"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "airRef",
														"type": "string"
													},
													"ns": {
														"type": "string"
													},
													"name": {
														"type": "string"
													},
													"args": {
														"items": {
															"type": "string"
														},
														"type": "array"
													}
												},
												"required": [
													"kind",
													"ns",
													"name",
													"args"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "predicate",
														"type": "string"
													},
													"name": {
														"type": "string"
													},
													"value": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"name",
													"value"
												],
												"type": "object"
											}
										]
									},
									"id": {
										"type": "string"
									},
									"type": {
										"$ref": "#/$defs/Type"
									}
								},
								"required": [
									"id",
									"expr"
								],
								"type": "object"
							},
							{
								"additionalProperties": false,
								"properties": {
									"blocks": {
										"items": {
											"additionalProperties": false,
											"properties": {
												"id": {
													"type": "string"
												},
												"instructions": {
													"items": {
														"anyOf": [
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "assign",
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"value": {
																		"anyOf": [
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "lit",
																						"type": "string"
																					},
																					"type": {
																						"$ref": "#/$defs/Type"
																					},
																					"value": {}
																				},
																				"required": [
																					"kind",
																					"type",
																					"value"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "ref",
																						"type": "string"
																					},
																					"id": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"id"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "var",
																						"type": "string"
																					},
																					"name": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"name"
																				],
																				"type": "object"
																			},
																			{
																				"$ref": "#/$defs/CallExpr"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "if",
																						"type": "string"
																					},
																					"type": {
																						"$ref": "#/$defs/Type"
																					},
																					"cond": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					},
																					"then": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					},
																					"else": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					}
																				},
																				"required": [
																					"kind",
																					"cond",
																					"then",
																					"else"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "let",
																						"type": "string"
																					},
																					"type": {
																						"$ref": "#/$defs/Type"
																					},
																					"name": {
																						"type": "string"
																					},
																					"value": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					},
																					"body": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					}
																				},
																				"required": [
																					"kind",
																					"name",
																					"value",
																					"body"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "airRef",
																						"type": "string"
																					},
																					"ns": {
																						"type": "string"
																					},
																					"name": {
																						"type": "string"
																					},
																					"args": {
																						"items": {
																							"type": "string"
																						},
																						"type": "array"
																					}
																				},
																				"required": [
																					"kind",
																					"ns",
																					"name",
																					"args"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "predicate",
																						"type": "string"
																					},
																					"name": {
																						"type": "string"
																					},
																					"value": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"name",
																					"value"
																				],
																				"type": "object"
																			}
																		]
																	}
																},
																"required": [
																	"kind",
																	"target",
																	"value"
																],
																"type": "object"
															},
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "op",
																		"type": "string"
																	},
																	"ns": {
																		"type": "string"
																	},
																	"name": {
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"args": {
																		"items": {
																			"type": "string"
																		},
																		"type": "array"
																	}
																},
																"required": [
																	"kind",
																	"target",
																	"ns",
																	"name",
																	"args"
																],
																"type": "object"
															},
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "phi",
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"sources": {
																		"items": {
																			"additionalProperties": false,
																			"properties": {
																				"block": {
																					"type": "string"
																				},
																				"id": {
																					"type": "string"
																				}
																			},
																			"required": [
																				"block",
																				"id"
																			],
																			"type": "object"
																		},
																		"type": "array"
																	}
																},
																"required": [
																	"kind",
																	"target",
																	"sources"
																],
																"type": "object"
															}
														]
													},
													"type": "array"
												},
												"terminator": {
													"anyOf": [
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "jump",
																	"type": "string"
																},
																"to": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"to"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "branch",
																	"type": "string"
																},
																"cond": {
																	"type": "string"
																},
																"then": {
																	"type": "string"
																},
																"else": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"cond",
																"then",
																"else"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "return",
																	"type": "string"
																},
																"value": {
																	"type": "string"
																}
															},
															"required": [
																"kind"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "exit",
																	"type": "string"
																},
																"code": {
																	"anyOf": [
																		{
																			"type": "string"
																		},
																		{
																			"type": "number"
																		}
																	]
																}
															},
															"required": [
																"kind"
															],
															"type": "object"
														}
													]
												}
											},
											"required": [
												"id",
												"instructions",
												"terminator"
											],
											"type": "object"
										},
										"type": "array"
									},
									"entry": {
										"type": "string"
									},
									"id": {
										"type": "string"
									},
									"type": {
										"$ref": "#/$defs/Type"
									}
								},
								"required": [
									"id",
									"blocks",
									"entry"
								],
								"type": "object"
							}
						]
					},
					"type": "array"
				},
				"result": {
					"type": "string"
				},
				"version": {
					"pattern": "^\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9.]+)?$",
					"type": "string"
				}
			},
			"required": [
				"version",
				"airDefs",
				"nodes",
				"result"
			],
			"type": "object"
		},
		{
			"additionalProperties": false,
			"description": "CIRDocument",
			"properties": {
				"airDefs": {
					"items": {
						"additionalProperties": false,
						"properties": {
							"body": {
								"anyOf": [
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "lit",
												"type": "string"
											},
											"type": {
												"$ref": "#/$defs/Type"
											},
											"value": {}
										},
										"required": [
											"kind",
											"type",
											"value"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "ref",
												"type": "string"
											},
											"id": {
												"type": "string"
											}
										},
										"required": [
											"kind",
											"id"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "var",
												"type": "string"
											},
											"name": {
												"type": "string"
											}
										},
										"required": [
											"kind",
											"name"
										],
										"type": "object"
									},
									{
										"$ref": "#/$defs/CallExpr"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "if",
												"type": "string"
											},
											"type": {
												"$ref": "#/$defs/Type"
											},
											"cond": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											},
											"then": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											},
											"else": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											}
										},
										"required": [
											"kind",
											"cond",
											"then",
											"else"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "let",
												"type": "string"
											},
											"type": {
												"$ref": "#/$defs/Type"
											},
											"name": {
												"type": "string"
											},
											"value": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											},
											"body": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											}
										},
										"required": [
											"kind",
											"name",
											"value",
											"body"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "airRef",
												"type": "string"
											},
											"ns": {
												"type": "string"
											},
											"name": {
												"type": "string"
											},
											"args": {
												"items": {
													"type": "string"
												},
												"type": "array"
											}
										},
										"required": [
											"kind",
											"ns",
											"name",
											"args"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "predicate",
												"type": "string"
											},
											"name": {
												"type": "string"
											},
											"value": {
												"type": "string"
											}
										},
										"required": [
											"kind",
											"name",
											"value"
										],
										"type": "object"
									}
								]
							},
							"name": {
								"type": "string"
							},
							"ns": {
								"type": "string"
							},
							"params": {
								"items": {
									"type": "string"
								},
								"type": "array"
							},
							"result": {
								"$ref": "#/$defs/Type"
							}
						},
						"required": [
							"ns",
							"name",
							"params",
							"result",
							"body"
						],
						"type": "object"
					},
					"type": "array"
				},
				"capabilities": {
					"items": {
						"type": "string"
					},
					"type": "array"
				},
				"functionSigs": {
					"items": {
						"additionalProperties": false,
						"properties": {
							"name": {
								"type": "string"
							},
							"ns": {
								"type": "string"
							},
							"params": {
								"items": {
									"$ref": "#/$defs/Type"
								},
								"type": "array"
							},
							"pure": {
								"type": "boolean"
							},
							"returns": {
								"$ref": "#/$defs/Type"
							}
						},
						"required": [
							"ns",
							"name",
							"params",
							"returns",
							"pure"
						],
						"type": "object"
					},
					"type": "array"
				},
				"nodes": {
					"items": {
						"anyOf": [
							{
								"additionalProperties": false,
								"properties": {
									"expr": {
										"anyOf": [
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "lit",
														"type": "string"
													},
													"type": {
														"$ref": "#/$defs/Type"
													},
													"value": {}
												},
												"required": [
													"kind",
													"type",
													"value"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "ref",
														"type": "string"
													},
													"id": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"id"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "var",
														"type": "string"
													},
													"name": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"name"
												],
												"type": "object"
											},
											{
												"$ref": "#/$defs/CallExpr"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "if",
														"type": "string"
													},
													"type": {
														"$ref": "#/$defs/Type"
													},
													"cond": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													},
													"then": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													},
													"else": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													}
												},
												"required": [
													"kind",
													"cond",
													"then",
													"else"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "let",
														"type": "string"
													},
													"type": {
														"$ref": "#/$defs/Type"
													},
													"name": {
														"type": "string"
													},
													"value": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													},
													"body": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													}
												},
												"required": [
													"kind",
													"name",
													"value",
													"body"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "airRef",
														"type": "string"
													},
													"ns": {
														"type": "string"
													},
													"name": {
														"type": "string"
													},
													"args": {
														"items": {
															"type": "string"
														},
														"type": "array"
													}
												},
												"required": [
													"kind",
													"ns",
													"name",
													"args"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "predicate",
														"type": "string"
													},
													"name": {
														"type": "string"
													},
													"value": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"name",
													"value"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "lambda",
														"type": "string"
													},
													"type": {
														"$ref": "#/$defs/Type"
													},
													"params": {
														"items": {
															"anyOf": [
																{
																	"type": "string"
																},
																{
																	"additionalProperties": false,
																	"properties": {
																		"default": {
																			"$ref": "#/$defs/Expr"
																		},
																		"name": {
																			"type": "string"
																		},
																		"optional": {
																			"type": "boolean"
																		},
																		"type": {
																			"$ref": "#/$defs/Type"
																		}
																	},
																	"required": [
																		"name"
																	],
																	"type": "object"
																}
															]
														},
														"type": "array"
													},
													"body": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"params",
													"body",
													"type"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "callExpr",
														"type": "string"
													},
													"args": {
														"items": {
															"anyOf": [
																{
																	"type": "string"
																},
																{
																	"$ref": "#/$defs/Expr"
																}
															]
														},
														"type": "array"
													},
													"fn": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"fn",
													"args"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "fix",
														"type": "string"
													},
													"type": {
														"$ref": "#/$defs/Type"
													},
													"fn": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"fn",
													"type"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "do",
														"type": "string"
													},
													"exprs": {
														"items": {
															"anyOf": [
																{
																	"type": "string"
																},
																{
																	"$ref": "#/$defs/Expr"
																}
															]
														},
														"type": "array"
													}
												},
												"required": [
													"kind",
													"exprs"
												],
												"type": "object"
											}
										]
									},
									"id": {
										"type": "string"
									},
									"type": {
										"$ref": "#/$defs/Type"
									}
								},
								"required": [
									"id",
									"expr"
								],
								"type": "object"
							},
							{
								"additionalProperties": false,
								"properties": {
									"blocks": {
										"items": {
											"additionalProperties": false,
											"properties": {
												"id": {
													"type": "string"
												},
												"instructions": {
													"items": {
														"anyOf": [
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "assign",
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"value": {
																		"anyOf": [
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "lit",
																						"type": "string"
																					},
																					"type": {
																						"$ref": "#/$defs/Type"
																					},
																					"value": {}
																				},
																				"required": [
																					"kind",
																					"type",
																					"value"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "ref",
																						"type": "string"
																					},
																					"id": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"id"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "var",
																						"type": "string"
																					},
																					"name": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"name"
																				],
																				"type": "object"
																			},
																			{
																				"$ref": "#/$defs/CallExpr"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "if",
																						"type": "string"
																					},
																					"type": {
																						"$ref": "#/$defs/Type"
																					},
																					"cond": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					},
																					"then": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					},
																					"else": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					}
																				},
																				"required": [
																					"kind",
																					"cond",
																					"then",
																					"else"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "let",
																						"type": "string"
																					},
																					"type": {
																						"$ref": "#/$defs/Type"
																					},
																					"name": {
																						"type": "string"
																					},
																					"value": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					},
																					"body": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					}
																				},
																				"required": [
																					"kind",
																					"name",
																					"value",
																					"body"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "airRef",
																						"type": "string"
																					},
																					"ns": {
																						"type": "string"
																					},
																					"name": {
																						"type": "string"
																					},
																					"args": {
																						"items": {
																							"type": "string"
																						},
																						"type": "array"
																					}
																				},
																				"required": [
																					"kind",
																					"ns",
																					"name",
																					"args"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "predicate",
																						"type": "string"
																					},
																					"name": {
																						"type": "string"
																					},
																					"value": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"name",
																					"value"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "lambda",
																						"type": "string"
																					},
																					"type": {
																						"$ref": "#/$defs/Type"
																					},
																					"params": {
																						"items": {
																							"anyOf": [
																								{
																									"type": "string"
																								},
																								{
																									"additionalProperties": false,
																									"properties": {
																										"default": {
																											"$ref": "#/$defs/Expr"
																										},
																										"name": {
																											"type": "string"
																										},
																										"optional": {
																											"type": "boolean"
																										},
																										"type": {
																											"$ref": "#/$defs/Type"
																										}
																									},
																									"required": [
																										"name"
																									],
																									"type": "object"
																								}
																							]
																						},
																						"type": "array"
																					},
																					"body": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"params",
																					"body",
																					"type"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "callExpr",
																						"type": "string"
																					},
																					"args": {
																						"items": {
																							"anyOf": [
																								{
																									"type": "string"
																								},
																								{
																									"$ref": "#/$defs/Expr"
																								}
																							]
																						},
																						"type": "array"
																					},
																					"fn": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"fn",
																					"args"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "fix",
																						"type": "string"
																					},
																					"type": {
																						"$ref": "#/$defs/Type"
																					},
																					"fn": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"fn",
																					"type"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "do",
																						"type": "string"
																					},
																					"exprs": {
																						"items": {
																							"anyOf": [
																								{
																									"type": "string"
																								},
																								{
																									"$ref": "#/$defs/Expr"
																								}
																							]
																						},
																						"type": "array"
																					}
																				},
																				"required": [
																					"kind",
																					"exprs"
																				],
																				"type": "object"
																			}
																		]
																	}
																},
																"required": [
																	"kind",
																	"target",
																	"value"
																],
																"type": "object"
															},
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "op",
																		"type": "string"
																	},
																	"ns": {
																		"type": "string"
																	},
																	"name": {
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"args": {
																		"items": {
																			"type": "string"
																		},
																		"type": "array"
																	}
																},
																"required": [
																	"kind",
																	"target",
																	"ns",
																	"name",
																	"args"
																],
																"type": "object"
															},
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "phi",
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"sources": {
																		"items": {
																			"additionalProperties": false,
																			"properties": {
																				"block": {
																					"type": "string"
																				},
																				"id": {
																					"type": "string"
																				}
																			},
																			"required": [
																				"block",
																				"id"
																			],
																			"type": "object"
																		},
																		"type": "array"
																	}
																},
																"required": [
																	"kind",
																	"target",
																	"sources"
																],
																"type": "object"
															}
														]
													},
													"type": "array"
												},
												"terminator": {
													"anyOf": [
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "jump",
																	"type": "string"
																},
																"to": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"to"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "branch",
																	"type": "string"
																},
																"cond": {
																	"type": "string"
																},
																"then": {
																	"type": "string"
																},
																"else": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"cond",
																"then",
																"else"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "return",
																	"type": "string"
																},
																"value": {
																	"type": "string"
																}
															},
															"required": [
																"kind"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "exit",
																	"type": "string"
																},
																"code": {
																	"anyOf": [
																		{
																			"type": "string"
																		},
																		{
																			"type": "number"
																		}
																	]
																}
															},
															"required": [
																"kind"
															],
															"type": "object"
														}
													]
												}
											},
											"required": [
												"id",
												"instructions",
												"terminator"
											],
											"type": "object"
										},
										"type": "array"
									},
									"entry": {
										"type": "string"
									},
									"id": {
										"type": "string"
									},
									"type": {
										"$ref": "#/$defs/Type"
									}
								},
								"required": [
									"id",
									"blocks",
									"entry"
								],
								"type": "object"
							}
						]
					},
					"type": "array"
				},
				"result": {
					"type": "string"
				},
				"version": {
					"pattern": "^\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9.]+)?$",
					"type": "string"
				}
			},
			"required": [
				"version",
				"airDefs",
				"nodes",
				"result"
			],
			"type": "object"
		},
		{
			"additionalProperties": false,
			"description": "EIRDocument",
			"properties": {
				"airDefs": {
					"items": {
						"additionalProperties": false,
						"properties": {
							"body": {
								"anyOf": [
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "lit",
												"type": "string"
											},
											"type": {
												"$ref": "#/$defs/Type"
											},
											"value": {}
										},
										"required": [
											"kind",
											"type",
											"value"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "ref",
												"type": "string"
											},
											"id": {
												"type": "string"
											}
										},
										"required": [
											"kind",
											"id"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "var",
												"type": "string"
											},
											"name": {
												"type": "string"
											}
										},
										"required": [
											"kind",
											"name"
										],
										"type": "object"
									},
									{
										"$ref": "#/$defs/CallExpr"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "if",
												"type": "string"
											},
											"type": {
												"$ref": "#/$defs/Type"
											},
											"cond": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											},
											"then": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											},
											"else": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											}
										},
										"required": [
											"kind",
											"cond",
											"then",
											"else"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "let",
												"type": "string"
											},
											"type": {
												"$ref": "#/$defs/Type"
											},
											"name": {
												"type": "string"
											},
											"value": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											},
											"body": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											}
										},
										"required": [
											"kind",
											"name",
											"value",
											"body"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "airRef",
												"type": "string"
											},
											"ns": {
												"type": "string"
											},
											"name": {
												"type": "string"
											},
											"args": {
												"items": {
													"type": "string"
												},
												"type": "array"
											}
										},
										"required": [
											"kind",
											"ns",
											"name",
											"args"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "predicate",
												"type": "string"
											},
											"name": {
												"type": "string"
											},
											"value": {
												"type": "string"
											}
										},
										"required": [
											"kind",
											"name",
											"value"
										],
										"type": "object"
									}
								]
							},
							"name": {
								"type": "string"
							},
							"ns": {
								"type": "string"
							},
							"params": {
								"items": {
									"type": "string"
								},
								"type": "array"
							},
							"result": {
								"$ref": "#/$defs/Type"
							}
						},
						"required": [
							"ns",
							"name",
							"params",
							"result",
							"body"
						],
						"type": "object"
					},
					"type": "array"
				},
				"capabilities": {
					"items": {
						"type": "string"
					},
					"type": "array"
				},
				"functionSigs": {
					"items": {
						"additionalProperties": false,
						"properties": {
							"name": {
								"type": "string"
							},
							"ns": {
								"type": "string"
							},
							"params": {
								"items": {
									"$ref": "#/$defs/Type"
								},
								"type": "array"
							},
							"pure": {
								"type": "boolean"
							},
							"returns": {
								"$ref": "#/$defs/Type"
							}
						},
						"required": [
							"ns",
							"name",
							"params",
							"returns",
							"pure"
						],
						"type": "object"
					},
					"type": "array"
				},
				"nodes": {
					"items": {
						"anyOf": [
							{
								"additionalProperties": false,
								"properties": {
									"expr": {
										"$ref": "#/$defs/EirExpr"
									},
									"id": {
										"type": "string"
									},
									"type": {
										"$ref": "#/$defs/Type"
									}
								},
								"required": [
									"id",
									"expr"
								],
								"type": "object"
							},
							{
								"additionalProperties": false,
								"properties": {
									"blocks": {
										"items": {
											"additionalProperties": false,
											"properties": {
												"id": {
													"type": "string"
												},
												"instructions": {
													"items": {
														"anyOf": [
															{
																"anyOf": [
																	{
																		"additionalProperties": false,
																		"properties": {
																			"kind": {
																				"const": "assign",
																				"type": "string"
																			},
																			"target": {
																				"type": "string"
																			},
																			"value": {
																				"$ref": "#/$defs/EirExpr"
																			}
																		},
																		"required": [
																			"kind",
																			"target",
																			"value"
																		],
																		"type": "object"
																	},
																	{
																		"additionalProperties": false,
																		"properties": {
																			"kind": {
																				"const": "op",
																				"type": "string"
																			},
																			"ns": {
																				"type": "string"
																			},
																			"name": {
																				"type": "string"
																			},
																			"target": {
																				"type": "string"
																			},
																			"args": {
																				"items": {
																					"type": "string"
																				},
																				"type": "array"
																			}
																		},
																		"required": [
																			"kind",
																			"target",
																			"ns",
																			"name",
																			"args"
																		],
																		"type": "object"
																	},
																	{
																		"additionalProperties": false,
																		"properties": {
																			"kind": {
																				"const": "phi",
																				"type": "string"
																			},
																			"target": {
																				"type": "string"
																			},
																			"sources": {
																				"items": {
																					"additionalProperties": false,
																					"properties": {
																						"block": {
																							"type": "string"
																						},
																						"id": {
																							"type": "string"
																						}
																					},
																					"required": [
																						"block",
																						"id"
																					],
																					"type": "object"
																				},
																				"type": "array"
																			}
																		},
																		"required": [
																			"kind",
																			"target",
																			"sources"
																		],
																		"type": "object"
																	},
																	{
																		"additionalProperties": false,
																		"properties": {
																			"kind": {
																				"const": "effect",
																				"type": "string"
																			},
																			"op": {
																				"type": "string"
																			},
																			"target": {
																				"type": "string"
																			},
																			"args": {
																				"items": {
																					"type": "string"
																				},
																				"type": "array"
																			}
																		},
																		"required": [
																			"kind",
																			"target",
																			"op",
																			"args"
																		],
																		"type": "object"
																	},
																	{
																		"additionalProperties": false,
																		"properties": {
																			"kind": {
																				"const": "assignRef",
																				"type": "string"
																			},
																			"target": {
																				"type": "string"
																			},
																			"value": {
																				"type": "string"
																			}
																		},
																		"required": [
																			"kind",
																			"target",
																			"value"
																		],
																		"type": "object"
																	}
																]
															},
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "spawn",
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"entry": {
																		"type": "string"
																	},
																	"args": {
																		"items": {
																			"type": "string"
																		},
																		"type": "array"
																	}
																},
																"required": [
																	"kind",
																	"target",
																	"entry"
																],
																"type": "object"
															},
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "channelOp",
																		"type": "string"
																	},
																	"op": {
																		"enum": [
																			"send",
																			"recv",
																			"trySend",
																			"tryRecv"
																		],
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"channel": {
																		"type": "string"
																	},
																	"value": {
																		"type": "string"
																	}
																},
																"required": [
																	"kind",
																	"op",
																	"channel"
																],
																"type": "object"
															},
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "await",
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"future": {
																		"type": "string"
																	}
																},
																"required": [
																	"kind",
																	"target",
																	"future"
																],
																"type": "object"
															}
														]
													},
													"type": "array"
												},
												"terminator": {
													"anyOf": [
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "jump",
																	"type": "string"
																},
																"to": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"to"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "branch",
																	"type": "string"
																},
																"cond": {
																	"type": "string"
																},
																"then": {
																	"type": "string"
																},
																"else": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"cond",
																"then",
																"else"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "return",
																	"type": "string"
																},
																"value": {
																	"type": "string"
																}
															},
															"required": [
																"kind"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "exit",
																	"type": "string"
																},
																"code": {
																	"anyOf": [
																		{
																			"type": "string"
																		},
																		{
																			"type": "number"
																		}
																	]
																}
															},
															"required": [
																"kind"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "fork",
																	"type": "string"
																},
																"branches": {
																	"items": {
																		"additionalProperties": false,
																		"properties": {
																			"block": {
																				"type": "string"
																			},
																			"taskId": {
																				"type": "string"
																			}
																		},
																		"required": [
																			"block",
																			"taskId"
																		],
																		"type": "object"
																	},
																	"type": "array"
																},
																"continuation": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"branches",
																"continuation"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "join",
																	"type": "string"
																},
																"tasks": {
																	"items": {
																		"type": "string"
																	},
																	"type": "array"
																},
																"results": {
																	"items": {
																		"type": "string"
																	},
																	"type": "array"
																},
																"to": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"tasks",
																"to"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "suspend",
																	"type": "string"
																},
																"future": {
																	"type": "string"
																},
																"resumeBlock": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"future",
																"resumeBlock"
															],
															"type": "object"
														}
													]
												}
											},
											"required": [
												"id",
												"instructions",
												"terminator"
											],
											"type": "object"
										},
										"type": "array"
									},
									"entry": {
										"type": "string"
									},
									"id": {
										"type": "string"
									},
									"type": {
										"$ref": "#/$defs/Type"
									}
								},
								"required": [
									"id",
									"blocks",
									"entry"
								],
								"type": "object"
							}
						]
					},
					"type": "array"
				},
				"result": {
					"type": "string"
				},
				"version": {
					"pattern": "^\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9.]+)?$",
					"type": "string"
				}
			},
			"required": [
				"version",
				"nodes",
				"result"
			],
			"type": "object"
		},
		{
			"additionalProperties": false,
			"description": "LIRDocument",
			"properties": {
				"airDefs": {
					"items": {
						"additionalProperties": false,
						"properties": {
							"body": {
								"anyOf": [
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "lit",
												"type": "string"
											},
											"type": {
												"$ref": "#/$defs/Type"
											},
											"value": {}
										},
										"required": [
											"kind",
											"type",
											"value"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "ref",
												"type": "string"
											},
											"id": {
												"type": "string"
											}
										},
										"required": [
											"kind",
											"id"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "var",
												"type": "string"
											},
											"name": {
												"type": "string"
											}
										},
										"required": [
											"kind",
											"name"
										],
										"type": "object"
									},
									{
										"$ref": "#/$defs/CallExpr"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "if",
												"type": "string"
											},
											"type": {
												"$ref": "#/$defs/Type"
											},
											"cond": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											},
											"then": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											},
											"else": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											}
										},
										"required": [
											"kind",
											"cond",
											"then",
											"else"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "let",
												"type": "string"
											},
											"type": {
												"$ref": "#/$defs/Type"
											},
											"name": {
												"type": "string"
											},
											"value": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											},
											"body": {
												"anyOf": [
													{
														"type": "string"
													},
													{
														"$ref": "#/$defs/Expr"
													}
												]
											}
										},
										"required": [
											"kind",
											"name",
											"value",
											"body"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "airRef",
												"type": "string"
											},
											"ns": {
												"type": "string"
											},
											"name": {
												"type": "string"
											},
											"args": {
												"items": {
													"type": "string"
												},
												"type": "array"
											}
										},
										"required": [
											"kind",
											"ns",
											"name",
											"args"
										],
										"type": "object"
									},
									{
										"additionalProperties": false,
										"properties": {
											"kind": {
												"const": "predicate",
												"type": "string"
											},
											"name": {
												"type": "string"
											},
											"value": {
												"type": "string"
											}
										},
										"required": [
											"kind",
											"name",
											"value"
										],
										"type": "object"
									}
								]
							},
							"name": {
								"type": "string"
							},
							"ns": {
								"type": "string"
							},
							"params": {
								"items": {
									"type": "string"
								},
								"type": "array"
							},
							"result": {
								"$ref": "#/$defs/Type"
							}
						},
						"required": [
							"ns",
							"name",
							"params",
							"result",
							"body"
						],
						"type": "object"
					},
					"type": "array"
				},
				"capabilities": {
					"items": {
						"type": "string"
					},
					"type": "array"
				},
				"functionSigs": {
					"items": {
						"additionalProperties": false,
						"properties": {
							"name": {
								"type": "string"
							},
							"ns": {
								"type": "string"
							},
							"params": {
								"items": {
									"$ref": "#/$defs/Type"
								},
								"type": "array"
							},
							"pure": {
								"type": "boolean"
							},
							"returns": {
								"$ref": "#/$defs/Type"
							}
						},
						"required": [
							"ns",
							"name",
							"params",
							"returns",
							"pure"
						],
						"type": "object"
					},
					"type": "array"
				},
				"nodes": {
					"items": {
						"anyOf": [
							{
								"additionalProperties": false,
								"properties": {
									"expr": {
										"anyOf": [
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "lit",
														"type": "string"
													},
													"type": {
														"$ref": "#/$defs/Type"
													},
													"value": {}
												},
												"required": [
													"kind",
													"type",
													"value"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "ref",
														"type": "string"
													},
													"id": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"id"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "var",
														"type": "string"
													},
													"name": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"name"
												],
												"type": "object"
											},
											{
												"$ref": "#/$defs/CallExpr"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "if",
														"type": "string"
													},
													"type": {
														"$ref": "#/$defs/Type"
													},
													"cond": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													},
													"then": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													},
													"else": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													}
												},
												"required": [
													"kind",
													"cond",
													"then",
													"else"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "let",
														"type": "string"
													},
													"type": {
														"$ref": "#/$defs/Type"
													},
													"name": {
														"type": "string"
													},
													"value": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													},
													"body": {
														"anyOf": [
															{
																"type": "string"
															},
															{
																"$ref": "#/$defs/Expr"
															}
														]
													}
												},
												"required": [
													"kind",
													"name",
													"value",
													"body"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "airRef",
														"type": "string"
													},
													"ns": {
														"type": "string"
													},
													"name": {
														"type": "string"
													},
													"args": {
														"items": {
															"type": "string"
														},
														"type": "array"
													}
												},
												"required": [
													"kind",
													"ns",
													"name",
													"args"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "predicate",
														"type": "string"
													},
													"name": {
														"type": "string"
													},
													"value": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"name",
													"value"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "lambda",
														"type": "string"
													},
													"type": {
														"$ref": "#/$defs/Type"
													},
													"params": {
														"items": {
															"anyOf": [
																{
																	"type": "string"
																},
																{
																	"additionalProperties": false,
																	"properties": {
																		"default": {
																			"$ref": "#/$defs/Expr"
																		},
																		"name": {
																			"type": "string"
																		},
																		"optional": {
																			"type": "boolean"
																		},
																		"type": {
																			"$ref": "#/$defs/Type"
																		}
																	},
																	"required": [
																		"name"
																	],
																	"type": "object"
																}
															]
														},
														"type": "array"
													},
													"body": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"params",
													"body",
													"type"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "callExpr",
														"type": "string"
													},
													"args": {
														"items": {
															"anyOf": [
																{
																	"type": "string"
																},
																{
																	"$ref": "#/$defs/Expr"
																}
															]
														},
														"type": "array"
													},
													"fn": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"fn",
													"args"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "fix",
														"type": "string"
													},
													"type": {
														"$ref": "#/$defs/Type"
													},
													"fn": {
														"type": "string"
													}
												},
												"required": [
													"kind",
													"fn",
													"type"
												],
												"type": "object"
											},
											{
												"additionalProperties": false,
												"properties": {
													"kind": {
														"const": "do",
														"type": "string"
													},
													"exprs": {
														"items": {
															"anyOf": [
																{
																	"type": "string"
																},
																{
																	"$ref": "#/$defs/Expr"
																}
															]
														},
														"type": "array"
													}
												},
												"required": [
													"kind",
													"exprs"
												],
												"type": "object"
											}
										]
									},
									"id": {
										"type": "string"
									},
									"type": {
										"$ref": "#/$defs/Type"
									}
								},
								"required": [
									"id",
									"expr"
								],
								"type": "object"
							},
							{
								"additionalProperties": false,
								"properties": {
									"blocks": {
										"items": {
											"additionalProperties": false,
											"properties": {
												"id": {
													"type": "string"
												},
												"instructions": {
													"items": {
														"anyOf": [
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "assign",
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"value": {
																		"anyOf": [
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "lit",
																						"type": "string"
																					},
																					"type": {
																						"$ref": "#/$defs/Type"
																					},
																					"value": {}
																				},
																				"required": [
																					"kind",
																					"type",
																					"value"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "ref",
																						"type": "string"
																					},
																					"id": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"id"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "var",
																						"type": "string"
																					},
																					"name": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"name"
																				],
																				"type": "object"
																			},
																			{
																				"$ref": "#/$defs/CallExpr"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "if",
																						"type": "string"
																					},
																					"type": {
																						"$ref": "#/$defs/Type"
																					},
																					"cond": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					},
																					"then": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					},
																					"else": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					}
																				},
																				"required": [
																					"kind",
																					"cond",
																					"then",
																					"else"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "let",
																						"type": "string"
																					},
																					"type": {
																						"$ref": "#/$defs/Type"
																					},
																					"name": {
																						"type": "string"
																					},
																					"value": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					},
																					"body": {
																						"anyOf": [
																							{
																								"type": "string"
																							},
																							{
																								"$ref": "#/$defs/Expr"
																							}
																						]
																					}
																				},
																				"required": [
																					"kind",
																					"name",
																					"value",
																					"body"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "airRef",
																						"type": "string"
																					},
																					"ns": {
																						"type": "string"
																					},
																					"name": {
																						"type": "string"
																					},
																					"args": {
																						"items": {
																							"type": "string"
																						},
																						"type": "array"
																					}
																				},
																				"required": [
																					"kind",
																					"ns",
																					"name",
																					"args"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "predicate",
																						"type": "string"
																					},
																					"name": {
																						"type": "string"
																					},
																					"value": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"name",
																					"value"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "lambda",
																						"type": "string"
																					},
																					"type": {
																						"$ref": "#/$defs/Type"
																					},
																					"params": {
																						"items": {
																							"anyOf": [
																								{
																									"type": "string"
																								},
																								{
																									"additionalProperties": false,
																									"properties": {
																										"default": {
																											"$ref": "#/$defs/Expr"
																										},
																										"name": {
																											"type": "string"
																										},
																										"optional": {
																											"type": "boolean"
																										},
																										"type": {
																											"$ref": "#/$defs/Type"
																										}
																									},
																									"required": [
																										"name"
																									],
																									"type": "object"
																								}
																							]
																						},
																						"type": "array"
																					},
																					"body": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"params",
																					"body",
																					"type"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "callExpr",
																						"type": "string"
																					},
																					"args": {
																						"items": {
																							"anyOf": [
																								{
																									"type": "string"
																								},
																								{
																									"$ref": "#/$defs/Expr"
																								}
																							]
																						},
																						"type": "array"
																					},
																					"fn": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"fn",
																					"args"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "fix",
																						"type": "string"
																					},
																					"type": {
																						"$ref": "#/$defs/Type"
																					},
																					"fn": {
																						"type": "string"
																					}
																				},
																				"required": [
																					"kind",
																					"fn",
																					"type"
																				],
																				"type": "object"
																			},
																			{
																				"additionalProperties": false,
																				"properties": {
																					"kind": {
																						"const": "do",
																						"type": "string"
																					},
																					"exprs": {
																						"items": {
																							"anyOf": [
																								{
																									"type": "string"
																								},
																								{
																									"$ref": "#/$defs/Expr"
																								}
																							]
																						},
																						"type": "array"
																					}
																				},
																				"required": [
																					"kind",
																					"exprs"
																				],
																				"type": "object"
																			}
																		]
																	}
																},
																"required": [
																	"kind",
																	"target",
																	"value"
																],
																"type": "object"
															},
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "call",
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"callee": {
																		"type": "string"
																	},
																	"args": {
																		"items": {
																			"type": "string"
																		},
																		"type": "array"
																	}
																},
																"required": [
																	"kind",
																	"target",
																	"callee",
																	"args"
																],
																"type": "object"
															},
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "op",
																		"type": "string"
																	},
																	"ns": {
																		"type": "string"
																	},
																	"name": {
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"args": {
																		"items": {
																			"type": "string"
																		},
																		"type": "array"
																	}
																},
																"required": [
																	"kind",
																	"target",
																	"ns",
																	"name",
																	"args"
																],
																"type": "object"
															},
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "phi",
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"sources": {
																		"items": {
																			"additionalProperties": false,
																			"properties": {
																				"block": {
																					"type": "string"
																				},
																				"id": {
																					"type": "string"
																				}
																			},
																			"required": [
																				"block",
																				"id"
																			],
																			"type": "object"
																		},
																		"type": "array"
																	}
																},
																"required": [
																	"kind",
																	"target",
																	"sources"
																],
																"type": "object"
															},
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "effect",
																		"type": "string"
																	},
																	"op": {
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"args": {
																		"items": {
																			"type": "string"
																		},
																		"type": "array"
																	}
																},
																"required": [
																	"kind",
																	"op",
																	"args"
																],
																"type": "object"
															},
															{
																"additionalProperties": false,
																"properties": {
																	"kind": {
																		"const": "assignRef",
																		"type": "string"
																	},
																	"target": {
																		"type": "string"
																	},
																	"value": {
																		"type": "string"
																	}
																},
																"required": [
																	"kind",
																	"target",
																	"value"
																],
																"type": "object"
															}
														]
													},
													"type": "array"
												},
												"terminator": {
													"anyOf": [
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "jump",
																	"type": "string"
																},
																"to": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"to"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "branch",
																	"type": "string"
																},
																"cond": {
																	"type": "string"
																},
																"then": {
																	"type": "string"
																},
																"else": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"cond",
																"then",
																"else"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "return",
																	"type": "string"
																},
																"value": {
																	"type": "string"
																}
															},
															"required": [
																"kind"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "exit",
																	"type": "string"
																},
																"code": {
																	"anyOf": [
																		{
																			"type": "string"
																		},
																		{
																			"type": "number"
																		}
																	]
																}
															},
															"required": [
																"kind"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "fork",
																	"type": "string"
																},
																"branches": {
																	"items": {
																		"additionalProperties": false,
																		"properties": {
																			"block": {
																				"type": "string"
																			},
																			"taskId": {
																				"type": "string"
																			}
																		},
																		"required": [
																			"block",
																			"taskId"
																		],
																		"type": "object"
																	},
																	"type": "array"
																},
																"continuation": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"branches",
																"continuation"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "join",
																	"type": "string"
																},
																"tasks": {
																	"items": {
																		"type": "string"
																	},
																	"type": "array"
																},
																"results": {
																	"items": {
																		"type": "string"
																	},
																	"type": "array"
																},
																"to": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"tasks",
																"to"
															],
															"type": "object"
														},
														{
															"additionalProperties": false,
															"properties": {
																"kind": {
																	"const": "suspend",
																	"type": "string"
																},
																"future": {
																	"type": "string"
																},
																"resumeBlock": {
																	"type": "string"
																}
															},
															"required": [
																"kind",
																"future",
																"resumeBlock"
															],
															"type": "object"
														}
													]
												}
											},
											"required": [
												"id",
												"instructions",
												"terminator"
											],
											"type": "object"
										},
										"type": "array"
									},
									"entry": {
										"type": "string"
									},
									"id": {
										"type": "string"
									},
									"type": {
										"$ref": "#/$defs/Type"
									}
								},
								"required": [
									"id",
									"blocks",
									"entry"
								],
								"type": "object"
							}
						]
					},
					"type": "array"
				},
				"result": {
					"type": "string"
				},
				"version": {
					"pattern": "^\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9.]+)?$",
					"type": "string"
				}
			},
			"required": [
				"version",
				"nodes",
				"result"
			],
			"type": "object"
		}
	],
	"description": "SPIRALDocument",
	"$defs": {
		"CallExpr": {
			"additionalProperties": false,
			"id": "CallExpr",
			"properties": {
				"kind": {
					"const": "call",
					"type": "string"
				},
				"ns": {
					"type": "string"
				},
				"name": {
					"type": "string"
				},
				"args": {
					"items": {
						"anyOf": [
							{
								"type": "string"
							},
							{
								"$ref": "#/$defs/Expr"
							}
						]
					},
					"type": "array"
				}
			},
			"required": [
				"kind",
				"ns",
				"name",
				"args"
			],
			"type": "object"
		},
		"EirExpr": {
			"anyOf": [
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "lit",
							"type": "string"
						},
						"type": {
							"$ref": "#/$defs/Type"
						},
						"value": {}
					},
					"required": [
						"kind",
						"type",
						"value"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "ref",
							"type": "string"
						},
						"id": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"id"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "var",
							"type": "string"
						},
						"name": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"name"
					],
					"type": "object"
				},
				{
					"$ref": "#/$defs/CallExpr"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "if",
							"type": "string"
						},
						"type": {
							"$ref": "#/$defs/Type"
						},
						"cond": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"then": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"else": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						}
					},
					"required": [
						"kind",
						"cond",
						"then",
						"else"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "let",
							"type": "string"
						},
						"type": {
							"$ref": "#/$defs/Type"
						},
						"name": {
							"type": "string"
						},
						"value": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"body": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						}
					},
					"required": [
						"kind",
						"name",
						"value",
						"body"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "airRef",
							"type": "string"
						},
						"ns": {
							"type": "string"
						},
						"name": {
							"type": "string"
						},
						"args": {
							"items": {
								"type": "string"
							},
							"type": "array"
						}
					},
					"required": [
						"kind",
						"ns",
						"name",
						"args"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "predicate",
							"type": "string"
						},
						"name": {
							"type": "string"
						},
						"value": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"name",
						"value"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "lambda",
							"type": "string"
						},
						"type": {
							"$ref": "#/$defs/Type"
						},
						"params": {
							"items": {
								"anyOf": [
									{
										"type": "string"
									},
									{
										"additionalProperties": false,
										"properties": {
											"default": {
												"$ref": "#/$defs/Expr"
											},
											"name": {
												"type": "string"
											},
											"optional": {
												"type": "boolean"
											},
											"type": {
												"$ref": "#/$defs/Type"
											}
										},
										"required": [
											"name"
										],
										"type": "object"
									}
								]
							},
							"type": "array"
						},
						"body": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"params",
						"body",
						"type"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "callExpr",
							"type": "string"
						},
						"args": {
							"items": {
								"anyOf": [
									{
										"type": "string"
									},
									{
										"$ref": "#/$defs/Expr"
									}
								]
							},
							"type": "array"
						},
						"fn": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"fn",
						"args"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "fix",
							"type": "string"
						},
						"type": {
							"$ref": "#/$defs/Type"
						},
						"fn": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"fn",
						"type"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "do",
							"type": "string"
						},
						"exprs": {
							"items": {
								"anyOf": [
									{
										"type": "string"
									},
									{
										"$ref": "#/$defs/Expr"
									}
								]
							},
							"type": "array"
						}
					},
					"required": [
						"kind",
						"exprs"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "seq",
							"type": "string"
						},
						"first": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"then": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						}
					},
					"required": [
						"kind",
						"first",
						"then"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "assign",
							"type": "string"
						},
						"target": {
							"type": "string"
						},
						"value": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						}
					},
					"required": [
						"kind",
						"target",
						"value"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "while",
							"type": "string"
						},
						"body": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"cond": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						}
					},
					"required": [
						"kind",
						"cond",
						"body"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "for",
							"type": "string"
						},
						"var": {
							"type": "string"
						},
						"init": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"update": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"body": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"cond": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						}
					},
					"required": [
						"kind",
						"var",
						"init",
						"cond",
						"update",
						"body"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "iter",
							"type": "string"
						},
						"var": {
							"type": "string"
						},
						"iter": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"body": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						}
					},
					"required": [
						"kind",
						"var",
						"iter",
						"body"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "effect",
							"type": "string"
						},
						"op": {
							"type": "string"
						},
						"args": {
							"items": {
								"anyOf": [
									{
										"type": "string"
									},
									{
										"$ref": "#/$defs/Expr"
									}
								]
							},
							"type": "array"
						}
					},
					"required": [
						"kind",
						"op",
						"args"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "refCell",
							"type": "string"
						},
						"target": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"target"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "deref",
							"type": "string"
						},
						"target": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"target"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "try",
							"type": "string"
						},
						"tryBody": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"catchParam": {
							"type": "string"
						},
						"catchBody": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"fallback": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						}
					},
					"required": [
						"kind",
						"tryBody",
						"catchParam",
						"catchBody"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "par",
							"type": "string"
						},
						"branches": {
							"items": {
								"type": "string"
							},
							"type": "array"
						}
					},
					"required": [
						"kind",
						"branches"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "spawn",
							"type": "string"
						},
						"task": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"task"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "await",
							"type": "string"
						},
						"future": {
							"type": "string"
						},
						"timeout": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"fallback": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"returnIndex": {
							"type": "boolean"
						}
					},
					"required": [
						"kind",
						"future"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "channel",
							"type": "string"
						},
						"channelType": {
							"enum": [
								"mpsc",
								"spsc",
								"mpmc",
								"broadcast"
							],
							"type": "string"
						},
						"bufferSize": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						}
					},
					"required": [
						"kind",
						"channelType"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "send",
							"type": "string"
						},
						"channel": {
							"type": "string"
						},
						"value": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						}
					},
					"required": [
						"kind",
						"channel",
						"value"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "recv",
							"type": "string"
						},
						"channel": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"channel"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "select",
							"type": "string"
						},
						"futures": {
							"items": {
								"type": "string"
							},
							"type": "array"
						},
						"timeout": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"fallback": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"returnIndex": {
							"type": "boolean"
						}
					},
					"required": [
						"kind",
						"futures"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "race",
							"type": "string"
						},
						"tasks": {
							"items": {
								"type": "string"
							},
							"type": "array"
						}
					},
					"required": [
						"kind",
						"tasks"
					],
					"type": "object"
				}
			],
			"id": "EirExpr"
		},
		"Expr": {
			"anyOf": [
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "lit",
							"type": "string"
						},
						"type": {
							"$ref": "#/$defs/Type"
						},
						"value": {}
					},
					"required": [
						"kind",
						"type",
						"value"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "ref",
							"type": "string"
						},
						"id": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"id"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "var",
							"type": "string"
						},
						"name": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"name"
					],
					"type": "object"
				},
				{
					"$ref": "#/$defs/CallExpr"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "if",
							"type": "string"
						},
						"type": {
							"$ref": "#/$defs/Type"
						},
						"cond": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"then": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"else": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						}
					},
					"required": [
						"kind",
						"cond",
						"then",
						"else"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "let",
							"type": "string"
						},
						"type": {
							"$ref": "#/$defs/Type"
						},
						"name": {
							"type": "string"
						},
						"value": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						},
						"body": {
							"anyOf": [
								{
									"type": "string"
								},
								{
									"$ref": "#/$defs/Expr"
								}
							]
						}
					},
					"required": [
						"kind",
						"name",
						"value",
						"body"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "airRef",
							"type": "string"
						},
						"ns": {
							"type": "string"
						},
						"name": {
							"type": "string"
						},
						"args": {
							"items": {
								"type": "string"
							},
							"type": "array"
						}
					},
					"required": [
						"kind",
						"ns",
						"name",
						"args"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "predicate",
							"type": "string"
						},
						"name": {
							"type": "string"
						},
						"value": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"name",
						"value"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "lambda",
							"type": "string"
						},
						"type": {
							"$ref": "#/$defs/Type"
						},
						"params": {
							"items": {
								"anyOf": [
									{
										"type": "string"
									},
									{
										"additionalProperties": false,
										"properties": {
											"default": {
												"$ref": "#/$defs/Expr"
											},
											"name": {
												"type": "string"
											},
											"optional": {
												"type": "boolean"
											},
											"type": {
												"$ref": "#/$defs/Type"
											}
										},
										"required": [
											"name"
										],
										"type": "object"
									}
								]
							},
							"type": "array"
						},
						"body": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"params",
						"body",
						"type"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "callExpr",
							"type": "string"
						},
						"args": {
							"items": {
								"anyOf": [
									{
										"type": "string"
									},
									{
										"$ref": "#/$defs/Expr"
									}
								]
							},
							"type": "array"
						},
						"fn": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"fn",
						"args"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "fix",
							"type": "string"
						},
						"type": {
							"$ref": "#/$defs/Type"
						},
						"fn": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"fn",
						"type"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "do",
							"type": "string"
						},
						"exprs": {
							"items": {
								"anyOf": [
									{
										"type": "string"
									},
									{
										"$ref": "#/$defs/Expr"
									}
								]
							},
							"type": "array"
						}
					},
					"required": [
						"kind",
						"exprs"
					],
					"type": "object"
				}
			],
			"id": "Expr"
		},
		"Type": {
			"anyOf": [
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "bool",
							"type": "string"
						}
					},
					"required": [
						"kind"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "int",
							"type": "string"
						}
					},
					"required": [
						"kind"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "float",
							"type": "string"
						}
					},
					"required": [
						"kind"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "string",
							"type": "string"
						}
					},
					"required": [
						"kind"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "void",
							"type": "string"
						}
					},
					"required": [
						"kind"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "set",
							"type": "string"
						},
						"of": {
							"$ref": "#/$defs/Type"
						}
					},
					"required": [
						"kind",
						"of"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "list",
							"type": "string"
						},
						"of": {
							"$ref": "#/$defs/Type"
						}
					},
					"required": [
						"kind",
						"of"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "map",
							"type": "string"
						},
						"key": {
							"$ref": "#/$defs/Type"
						},
						"value": {
							"$ref": "#/$defs/Type"
						}
					},
					"required": [
						"kind",
						"key",
						"value"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "option",
							"type": "string"
						},
						"of": {
							"$ref": "#/$defs/Type"
						}
					},
					"required": [
						"kind",
						"of"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "opaque",
							"type": "string"
						},
						"name": {
							"type": "string"
						}
					},
					"required": [
						"kind",
						"name"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "fn",
							"type": "string"
						},
						"params": {
							"items": {
								"$ref": "#/$defs/Type"
							},
							"type": "array"
						},
						"returns": {
							"$ref": "#/$defs/Type"
						},
						"optionalParams": {
							"items": {
								"type": "boolean"
							},
							"type": "array"
						}
					},
					"required": [
						"kind",
						"params",
						"returns"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "ref",
							"type": "string"
						},
						"of": {
							"$ref": "#/$defs/Type"
						}
					},
					"required": [
						"kind",
						"of"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "future",
							"type": "string"
						},
						"of": {
							"$ref": "#/$defs/Type"
						}
					},
					"required": [
						"kind",
						"of"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "channel",
							"type": "string"
						},
						"channelType": {
							"enum": [
								"mpsc",
								"spsc",
								"mpmc",
								"broadcast"
							],
							"type": "string"
						},
						"of": {
							"$ref": "#/$defs/Type"
						}
					},
					"required": [
						"kind",
						"channelType",
						"of"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "task",
							"type": "string"
						},
						"returns": {
							"$ref": "#/$defs/Type"
						}
					},
					"required": [
						"kind",
						"returns"
					],
					"type": "object"
				},
				{
					"additionalProperties": false,
					"properties": {
						"kind": {
							"const": "async",
							"type": "string"
						},
						"params": {
							"items": {
								"$ref": "#/$defs/Type"
							},
							"type": "array"
						},
						"returns": {
							"additionalProperties": false,
							"properties": {
								"kind": {
									"const": "future",
									"type": "string"
								},
								"of": {
									"$ref": "#/$defs/Type"
								}
							},
							"required": [
								"kind",
								"of"
							],
							"type": "object"
						}
					},
					"required": [
						"kind",
						"params",
						"returns"
					],
					"type": "object"
				}
			],
			"id": "Type"
		}
	}
}

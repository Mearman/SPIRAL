{
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"$id": "https://raw.githubusercontent.com/Mearman/SPIRAL/refs/heads/main/lir.schema.json",
	"title": "LIR Document",
	"description": "LIRDocument",
	"type": "object",
	"properties": {
		"$defs": {
			"type": "object",
			"additionalProperties": {
				"$ref": "spiral.schema.json#/$defs/Def"
			},
			"propertyNames": {
				"type": "string"
			}
		},
		"$imports": {
			"type": "object",
			"additionalProperties": {
				"$ref": "spiral.schema.json#/$defs/ImportEntry"
			},
			"propertyNames": {
				"type": "string"
			}
		},
		"airDefs": {
			"type": "array",
			"items": {
				"$ref": "spiral.schema.json#/$defs/AIRDef"
			}
		},
		"capabilities": {
			"type": "array",
			"items": {
				"type": "string"
			}
		},
		"functionSigs": {
			"type": "array",
			"items": {
				"$ref": "spiral.schema.json#/$defs/FunctionSignature"
			}
		},
		"nodes": {
			"type": "array",
			"items": {
				"anyOf": [
					{
						"type": "object",
						"properties": {
							"type": {
								"$ref": "spiral.schema.json#/$defs/Type"
							},
							"expr": {
								"$ref": "spiral.schema.json#/$defs/CirExpr"
							},
							"id": {
								"type": "string"
							}
						},
						"additionalProperties": false,
						"required": [
							"id",
							"expr"
						]
					},
					{
						"$ref": "spiral.schema.json#/$defs/RefNode"
					},
					{
						"type": "object",
						"properties": {
							"type": {
								"$ref": "spiral.schema.json#/$defs/Type"
							},
							"blocks": {
								"type": "array",
								"items": {
									"$ref": "spiral.schema.json#/$defs/LirBlock"
								}
							},
							"entry": {
								"type": "string"
							},
							"id": {
								"type": "string"
							}
						},
						"additionalProperties": false,
						"required": [
							"id",
							"blocks",
							"entry"
						]
					}
				]
			}
		},
		"result": {
			"type": "string"
		},
		"version": {
			"type": "string",
			"pattern": "^\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9.]+)?$"
		}
	},
	"additionalProperties": false,
	"required": [
		"version",
		"nodes",
		"result"
	],
	"id": "LIRDocument"
}

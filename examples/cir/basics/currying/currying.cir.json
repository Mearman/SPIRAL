{
	"$schema": "https://raw.githubusercontent.com/Mearman/SPIRAL/main/cir.schema.json",
	"version": "1.0.0",
	"airDefs": [
		{
			"ns": "core",
			"name": "add",
			"params": [
				"a",
				"b"
			],
			"result": {
				"kind": "int"
			},
			"body": {
				"kind": "ref",
				"id": "a"
			}
		}
	],
	"nodes": [
		{
			"id": "five",
			"expr": {
				"kind": "lit",
				"type": {
					"kind": "int"
				},
				"value": 5
			}
		},
		{
			"id": "three",
			"expr": {
				"kind": "lit",
				"type": {
					"kind": "int"
				},
				"value": 3
			}
		},
		{
			"id": "two",
			"expr": {
				"kind": "lit",
				"type": {
					"kind": "int"
				},
				"value": 2
			}
		},
		{
			"id": "ten",
			"expr": {
				"kind": "lit",
				"type": {
					"kind": "int"
				},
				"value": 10
			}
		},
		{
			"id": "add",
			"expr": {
				"kind": "lambda",
				"type": {
					"kind": "fn",
					"params": [
						{
							"kind": "int"
						},
						{
							"kind": "int"
						}
					],
					"returns": {
						"kind": "int"
					}
				},
				"params": [
					"x",
					"y"
				],
				"body": "addBody"
			}
		},
		{
			"id": "addBody",
			"expr": {
				"kind": "call",
				"ns": "core",
				"name": "add",
				"args": [
					"x",
					"y"
				]
			}
		},
		{
			"id": "addFive",
			"expr": {
				"kind": "callExpr",
				"args": [
					"five"
				],
				"fn": "add"
			}
		},
		{
			"id": "curriedResult",
			"expr": {
				"kind": "callExpr",
				"args": [
					"three"
				],
				"fn": "addFive"
			}
		},
		{
			"id": "addTwo",
			"expr": {
				"kind": "callExpr",
				"args": [
					"two"
				],
				"fn": "add"
			}
		},
		{
			"id": "partialResult",
			"expr": {
				"kind": "callExpr",
				"args": [
					"ten"
				],
				"fn": "addTwo"
			}
		}
	],
	"result": "curriedResult",
	"expected_result": {
		"kind": "error",
		"code": "ArityError",
		"message": "Arity error: expected at least 2 args, got 1"
	}
}
